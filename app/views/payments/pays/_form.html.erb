<%#= form_with(model: pay, local: true) do |form| %>
  <%# if pay.errors.any? %>
<!--    <div id="error_explanation">-->
<!--      <h2><%#= pluralize(webhook.errors.count, "error") %> prohibited this Pay Object from being saved:</h2>-->

<!--      <ul>-->
        <%# pay.errors.full_messages.each do |message| %>
<!--          <li><%#= message %></li>-->
        <%# end %>
<!--      </ul>-->
<!--    </div>-->
  <%# end %>

  <div class="row">
    <div class="s12">
      <ul class="tabs">
        <button class="tab col s3 active tab_link" type="button" onclick="orderType(event, 'mpesa')">M-PESA</button>
        <button class="tab col s3 tab_link" type="button" onclick="orderType(event, 'bank')">BANK</button>
        <button class="tab col s3 tab_link" type="button" onclick="orderType(event, 'create')">CREATE PAYMENT</button>
      </ul>
    </div>

    <br>

    <div class="pay_recipe">

      <div id="mpesa" class="col s12 pay_content">
        <!--      <h4>Mpesa</h4>-->
        <%= form_with(model: pay, local: true) do |form| %>
          <% if pay.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(webhook.errors.count, "error") %> prohibited this Pay Object from being saved:</h2>

              <ul>
                <% pay.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <%= render "common", form: form %>
          <%= form.hidden_field(:order_type, value: 0) %>
          <div>
            <%= form.label(:network, "Network Operator:") %>
            <%= form.text_field(:network) %>
          </div>

          <br>

          <div class="actions">
            <%= form.submit(data: { disable_with: "Creating PAY Object." }, class: "button btn btn-primary btn-lg") %>
          </div>

        <% end %>

      </div>

      <div id="bank" class="col s12 pay_content" style="display:none">
        <!--      <h4>Bank</h4>-->
        <%= form_with(model: pay, local: true) do |form| %>
          <% if pay.errors.any? %>
            <div id="error_explanation">
              <h2><%= pluralize(webhook.errors.count, "error") %> prohibited this Pay Object from being saved:</h2>

              <ul>
                <% pay.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <%= render "common", form: form %>
          <%= form.hidden_field(:order_type, value: 1) %>
          <p><%= label_tag(:bank_account_details, "Account Details:") %></p>

          <div>
            <%= form.label(:account_name, "Bank Account Name:") %>
            <%= form.text_field(:account_name) %>
          </div>

          <div>
            <%= form.label(:account_number, "Bank Account Number:") %>
            <%= form.text_field(:account_number) %>
          </div>

          <div>
            <%= form.label(:bank_id, "Bank ID Number:") %>
            <%= form.text_field(:bank_id) %>
          </div>

          <div>
            <%= form.label(:bank_branch_id, "Bank Branch ID Number:") %>
            <%= form.text_field(:bank_branch_id) %>
          </div>

          <br>

          <div class="actions">
            <%= form.submit(data: { disable_with: "Creating PAY Object." }, class: "button btn btn-primary btn-lg") %>
          </div>

        <% end %>
      </div>

    </div>

    <div id="create" class="col s12 pay_content" style="display:none">
<!--      <h4>Create Payment</h4>-->
      <%= form_with(model: pay, local: true) do |form| %>
        <% if pay.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(webhook.errors.count, "error") %> prohibited this Pay Object from being saved:</h2>

            <ul>
              <% pay.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>
        
        <%= form.hidden_field(:order_type, value: 2) %>
        <div>
          <%= form.select(:currency, options_for_select([ ['Kenyan Shilling', 'KES'], ['Ugandan Shilling', 'USH'], ['Tanzanian Shilling', 'TSH'], ]), { :prompt =>"CURRENCY" }, {:class => 'browser-default'}) %>
        </div>

        <br>

        <div>
          <%= form.label(:value, "Amount:") %>
          <%= form.text_field(:value) %>
        </div>

        <br>

        <div class="actions">
          <%= form.submit(data: { disable_with: "Creating PAY Object." }, class: "button btn btn-primary btn-lg") %>
        </div>

      <% end %>
    </div>

  </div>
